(function(n){function t(t){var i=n(".mvc-grid-pager-rows").val(),r;t||(t=1);i||(i=10);r={impId:n("#post-data").data("id"),pageNo:t,pageSize:i,toFile:0};n.ajax({url:"/Confirm/AccountantUploadPaging",type:"get",dataType:"html",data:r,success:function(t){n("#data-grid").html("").html(t)}})}n(document).ready(function(){n(document).on("click","#btn-upload",function(){var t=n("#frm-upload"),i;t.validate({rules:{FileUpload:{required:!0,extension:"xlsx|xls|xlsm",filesize:10485760}},messages:{FileUpload:{required:"Vui lòng upload danh sách nộp tiền",extension:"Vui lòng chọn file có định dạng là excel",filesize:"Dung lượng file phải nhỏ hơn 10M"}}});t.valid()&&(i=new FormData(t[0]),n.ajax({url:"/Confirm/AccountantUpload",type:"post",dataType:"html",data:i,processData:!1,contentType:!1,success:function(t){n("#data-grid").html("").html(t);n("#btn-confirm").prop("disabled",!1);n("#data-grid table tbody tr").each(function(t,i){var r=n(i).data("status");return n("#btn-confirm").prop("disabled",!0),r==="OK"?(n("#btn-confirm").prop("disabled",!1),!1):void 0})}}))});n(document).on("click",".grid-pager button",function(i){i.preventDefault();var r=n(this).attr("data-page");t(r)});n(document).on("click","#btn-confirm",function(){n.confirm({title:"Xác nhận?",content:"Bạn có muốn thực hiện xử lý giao dịch xác nhận nộp tiền này không?",type:"red",typeAnimated:!0,buttons:{tryAgain:{text:"Đồng ý",btnClass:"btn-red",action:function(){n.ajax({url:"/Confirm/AccountantSave",type:"post",dataType:"json",data:{id:n("#post-data").data("id")},success:function(t){console.log(t);t.success===!0?n.alert({title:"Thông báo thành công",content:t.message,type:"green",typeAnimated:!0,buttons:{ok:{text:"Đồng ý",btnClass:"btn-green",keys:["enter","shift"],action:function(){location.reload()}}}}):notifyDanger(t.message)}})}},close:{text:"Hủy",action:function(){}}}})})})})(jQuery);