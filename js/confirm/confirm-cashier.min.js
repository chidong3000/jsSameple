(function(n){function i(t){console.log(t);t?(n("#section-save").attr("data-id",t.regId),n("#txt-cst-name").val(t.custName),n("#txt-cst-phone").val(t.custPhone),n("#txt-cst-identity").val(t.custIdentity),n("#txt-bank").val(t.bankName),n("#cbo-account-type").val(t.accNoType),n("#txt-account-no").val(t.accountNo),n("#txt-peCode").val(t.custPeCode),n("#txt-inning").val(t.custPeIdx),n("#txt-name").val(t.custPeName),n("#txt-phone").val(t.custPePhone),n("#txt-typeName").val(t.custPeTypeName),n("#txt-address").val(t.custPeAddress),n("#cboProduct").val(t.productCode),n("#txtAmtAverage").val(formatNumber(t.paymentAmt)),n("#cboPeriodType").val(t.periodType),n("#cboDiscountType").val(t.discountType),n("#txtDiscountRate").val(t.discountRate),n("#txtDiscountAmt").val(formatNumber(t.discountAmt)),n("#txtDisburAmt").val(formatNumber(t.totalAmtDue)),n("#lblDisburAmtWord").html(t.totalAmtDueWord)):(n("#section-save").attr("data-id","0"),n("#txt-cst-name").val(""),n("#txt-cst-phone").val(""),n("#txt-cst-identity").val(""),n("#txt-bank").val(""),n("#cbo-account-type").val(""),n("#txt-account-no").val(""),n("#txt-peCode").val(""),n("#txt-inning").val(""),n("#txt-name").val(""),n("#txt-phone").val(""),n("#txt-typeName").val(""),n("#txt-address").val(""),n("#cboProduct").val(""),n("#txtAmtAverage").val(""),n("#cboPeriodType").val(""),n("#cboDiscountType").val(""),n("#txtDiscountRate").val(""),n("#txtDiscountAmt").val(""),n("#txtDisburAmt").val(""),n("#lblDisburAmtWord").html(""))}function t(t){t&&t===!0?(n("#btn-print").prop("disabled",!1),n("#btn-confirm").prop("disabled",!0)):(n("#btn-print").prop("disabled",!0),n("#btn-confirm").prop("disabled",!1))}n(document).ready(function(){n('input[name="RegisterCode"]').keypress(function(t){var i=t.which;if(i===13)return n("#btn-search").click(),!1});n(document).on("click","#btn-search",function(){n("#msg-code-invalid").html("");n("#register-info").removeClass("display-none").addClass("display-none");n("#section-save").removeClass("display-none").addClass("display-none");i();t(!1);var r=n("#frm-search-register");r.validate({rules:{RegisterCode:{required:!0}},messages:{RegisterCode:{required:"Vui lòng nhập"}}});r.valid()===!0&&n.ajax({url:"/Confirm/GetPayAwaitByCode",type:"get",dataType:"json",data:{code:n.trim(n("input[name='RegisterCode']").val())},success:function(t){if(t&&t.success===!0){n("#register-info").removeClass("display-none");n("#section-save").removeClass("display-none");var r=t.data;i(r)}else n("#msg-code-invalid").html("").html(`<p class="text-danger"><strong>${t.message}</strong></p>`)},error:function(n){console.log(n.responseText)}})});n(document).on("click","#btn-confirm",function(){n.confirm({title:"Xác nhận?",content:"Bạn xác nhận nộp tiền?",type:"red",typeAnimated:!0,buttons:{tryAgain:{text:"Đồng ý",btnClass:"btn-red",action:function(){n.ajax({url:"/Confirm/CashierConfirm",type:"post",dataType:"json",data:{id:n("#section-save").attr("data-id")},success:function(n){n&&n.success===!0?(notifySuccess(n.message),t(!0)):(notifyDanger(n.message),t(!1))}})}},close:{text:"Hủy",action:function(){}}}})});n(document).on("click","#btn-print",function(){var t=n("#section-save").attr("data-id");printInvoicePayInto(t,"W")})})})(jQuery);