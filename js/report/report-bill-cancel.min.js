(function(n){function u(){n("#dtpFromDate").datetimepicker({locale:"vi",format:"DD/MM/YYYY",defaultDate:moment().add(-7,"days")});n("#dtpToDate").datetimepicker({locale:"vi",format:"DD/MM/YYYY",defaultDate:moment(),useCurrent:!1});n("#dtpFromDate").on("dp.change",function(t){n("#dtpToDate").data("DateTimePicker").minDate(t.date)});n("#dtpToDate").on("dp.change",function(t){n("#dtpFromDate").data("DateTimePicker").maxDate(t.date)})}function f(){if(n("#chkToday").is(":checked")===!1){if(n("#dtpFromDate").val()===""||n("#dtpToDate").val()==="")return notifyDanger("Vui lòng nhập từ ngày và đến ngày"),!1;var i=moment(n("#dtpFromDate").val(),"DD/MM/YYYY"),r=moment(n("#dtpToDate").val(),"DD/MM/YYYY"),t=moment.duration(r.diff(i));if(t.asDays()<0)return notifyDanger("Từ ngày không được nhỏ hơn đến ngày"),!1;if(t.asDays()>60)return notifyDanger("Từ ngày và đến ngày không cách nhau 60 ngày"),!1}return!0}function r(t){var r=n(".mvc-grid-pager-rows").val(),u,e;t||(t=1);r&&parseInt(r)!==0||(r=10);u=f();u===!0&&(e={areaCode:n("#cboBranchs").val(),branchCode:n("#cboAreas").val(),userId:n("#cboUsers").val(),filter:n("#cboFilter").val(),filterValue:n.trim(n("#txtFilterValue").val()),fromDate:n("#dtpFromDate").val(),toDate:n("#dtpToDate").val(),productCode:n("#cboProduct").val(),status:n("#cboApprovedStatus").val(),pageNo:t,pageSize:r,isPaging:1},n.ajax({url:i,type:"post",dataType:"html",data:e,success:function(t){n("#data-grid").html(t)}}))}var t="RptBillCancel",i;typeof n("#pageName").val()!="undefined"&&(t=n("#pageName").val());i="/Report/"+t;n(document).ready(function(){u();bindSearchInfoPartial();n(document).on("click","#btn-search",function(n){n.preventDefault();r()});n(document).on("click",".grid-pager button",function(t){t.preventDefault();var i=n(this).attr("data-page");r(i)})})})(jQuery);