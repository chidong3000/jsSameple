(function(n){function i(){n("#dtpFromDate").datetimepicker({locale:"vi",format:"DD/MM/YYYY",defaultDate:moment().add(-7,"days")});n("#dtpToDate").datetimepicker({locale:"vi",format:"DD/MM/YYYY",defaultDate:moment(),useCurrent:!1});n("#dtpFromDate").on("dp.change",function(t){n("#dtpToDate").data("DateTimePicker").minDate(t.date)});n("#dtpToDate").on("dp.change",function(t){n("#dtpFromDate").data("DateTimePicker").maxDate(t.date)})}function r(){if(n("#chkToday").is(":checked")===!1){if(n("#dtpFromDate").val()===""||n("#dtpToDate").val()==="")return notifyDanger("Vui lòng nhập từ ngày và đến ngày"),!1;var i=moment(n("#dtpFromDate").val(),"DD/MM/YYYY"),r=moment(n("#dtpToDate").val(),"DD/MM/YYYY"),t=moment.duration(r.diff(i));if(t.asDays()<0)return notifyDanger("Từ ngày không được nhỏ hơn đến ngày"),!1;if(t.asDays()>60)return notifyDanger("Từ ngày và đến ngày không cách nhau 60 ngày"),!1}return!0}function t(t){var i=n(".mvc-grid-pager-rows").val(),u,f;t||(t=1);i&&parseInt(i)!==0||(i=10);u=r();u===!0&&(f={filter:n("#cboFilter").val(),filterValue:n.trim(n("#txtFilterValue").val()),channelType:n("#cboType").val(),FromDate:n("#dtpFromDate").val(),ToDate:n("#dtpToDate").val(),pageNo:t,pageSize:i,isPaging:1},n.ajax({url:"/Report/RptInOutExt",type:"get",dataType:"html",data:f,success:function(t){n("#data-grid").html(t)}}))}n(document).ready(function(){i();bindSearchInfoPartial();n(document).on("click","#btn-search",function(n){n.preventDefault();t()});n(document).on("click",".grid-pager button",function(i){i.preventDefault();var r=n(this).attr("data-page");t(r)});n(document).on("click","#btn-print",function(){var t=n(this).data("id"),r=n(this).data("code"),i=n(this).data("type");i==="I"?printInvoicePayInto(t):printInvoiceWithdraw(t)})})})(jQuery);