(function(n){function t(t){var i=n(".mvc-grid-pager-rows").val(),r,u;if(t||(t=1),i||(i=10),r=n("#cboFileList").val(),r===""){notifyDanger("Vui lòng chọn file upload");return}u={impId:r,pageNo:t,pageSize:i,toFile:0};n.ajax({url:"/BillCancel/WaitingList",type:"get",dataType:"html",data:u,success:function(t){console.log(t);n("#data-grid").html("").html(t);n("#data-grid table tbody tr").each(function(t,i){var r=n(i).data("status");if(r==="OK")return n("#btn-confirm").prop("disabled",!1),n("#btn-reject").prop("disabled",!1),!1})}})}n(document).ready(function(){n("#btn-confirm").prop("disabled",!0);n("#btn-reject").prop("disabled",!0);n(document).on("click","#btn-search-bill",function(i){i.preventDefault();n("#btn-confirm").prop("disabled",!0);n("#btn-reject").prop("disabled",!0);var r=n("#cboFileList").val();if(r===""){notifyDanger("Vui lòng chọn file upload");return}t()});n(document).on("click",".grid-pager button",function(i){i.preventDefault();var r=n(this).attr("data-page");t(r)});n(document).on("click","#btn-confirm",function(){var t=n("#post-data").data("id");if(t===""){notifyDanger("Không có dữ liệu");n("#btn-confirm").prop("disabled",!0);return}n.confirm({title:"Xác nhận?",content:"Bạn có muốn duyệt yêu cầu?",type:"red",typeAnimated:!0,buttons:{tryAgain:{text:"Đồng ý",btnClass:"btn-red",action:function(){n.ajax({url:"/BillCancel/Approve",type:"post",dataType:"json",data:{type:1,id:n("#post-data").data("id"),note:n("#txt-notes").val()},success:function(t){console.log(t);t.success===!0?n.alert({title:"Thông báo thành công",content:t.message,type:"green",typeAnimated:!0,buttons:{ok:{text:"Đồng ý",btnClass:"btn-green",keys:["enter","shift"],action:function(){location.reload()}}}}):notifyDanger(t.message)}})}},close:{text:"Hủy",action:function(){}}}})});n(document).on("click","#btn-reject",function(){var t=n("#post-data").data("id"),i=n("#txt-notes").val();if(t===""){notifyDanger("Không có dữ liệu");n("#btn-confirm").prop("disabled",!0);return}if(i===""){notifyDanger("Vui lòng nhập lý do từ chối");n("#txt-notes").focus();return}n.confirm({title:"Xác nhận?",content:"Bạn có muốn từ chối yêu cầu?",type:"red",typeAnimated:!0,buttons:{tryAgain:{text:"Đồng ý",btnClass:"btn-red",action:function(){n.ajax({url:"/BillCancel/Approve",type:"post",dataType:"json",data:{type:0,id:t,note:i},success:function(t){console.log(t);t.success===!0?n.alert({title:"Thông báo thành công",content:t.message,type:"green",typeAnimated:!0,buttons:{ok:{text:"Đồng ý",btnClass:"btn-green",keys:["enter","shift"],action:function(){location.reload()}}}}):notifyDanger(t.message)}})}},close:{text:"Hủy",action:function(){}}}})})})})(jQuery);